<!--matchTable.wxml-->
<view class="container" style="padding: 16px; background-color: #f9f9f9;">
  <view class="title" style="font-size: 20px; font-weight: bold; text-align: center; margin-bottom: 16px;">比赛对阵表</view>
  <view class="match-table">
    <view wx:for="{{schedule}}" wx:for-index="index" wx:for-item="item" wx:key="round">
      <view style="margin-top:16px; font-weight:bold; background:#e6f7ff; padding:8px 12px; border-radius:4px; color:#0050b3;">第{{index+1}}轮</view>
      <view wx:for="{{item}}" wx:for-index="idx" wx:for-item="court" wx:key="court" style="margin-bottom:12px;">
        <view style="display:flex; align-items:center; padding: 8px; background: #ffffff; border: 1px solid #d9d9d9; border-radius: 4px; flex-wrap: nowrap;">
          <text style="font-weight:bold; width:80px; color:#595959;">场地{{idx+1}}</text>
          <text style="flex:1; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">
            【<text style="color:{{genders[court[0]] === 'male' ? 'blue' : 'red'}}; font-weight: bold;">{{court[0]}}</text><text>,</text><text style="color:{{genders[court[1]] === 'male' ? 'blue' : 'red'}}; font-weight: bold;">{{court[1]}}</text><text style="color:#1aad19; font-weight: bold;"> VS </text><text style="color:{{genders[court[2]] === 'male' ? 'blue' : 'red'}}; font-weight: bold;">{{court[2]}}</text><text>,</text><text style="color:{{genders[court[3]] === 'male' ? 'blue' : 'red'}}; font-weight: bold;">{{court[3]}}</text>】
          </text>
        </view>
        <view style="margin:4px 0 0 60px; display:flex; align-items:center;">
          <picker mode="selector" range="{{scoreRange}}" 
            value="{{scoreRange.indexOf(scores[index][idx].left)}}" 
            data-round="{{index}}" data-court="{{idx}}" data-side="left" 
            bindchange="pickerScore">
            <view class="picker" style="width:50px; text-align:center; background:#fff; border:1px solid #d9d9d9; border-radius:4px;">
              {{scores[index][idx].left}}
            </view>
          </picker>
          <button size="mini" data-round="{{index}}" data-court="{{idx}}" data-side="left" bindtap="addScore" style="margin:0 4px; background:#e6f7ff; color:#0050b3; border:none;" wx:if="{{scores[index][idx].left >= 21}}">+</button>
          <text style="margin:0 8px; font-weight:bold; color:#595959;"> : </text>
          <picker mode="selector" range="{{scoreRange}}" 
            value="{{scoreRange.indexOf(scores[index][idx].right)}}" 
            data-round="{{index}}" data-court="{{idx}}" data-side="right" 
            bindchange="pickerScore">
            <view class="picker" style="width:50px; text-align:center; background:#fff; border:1px solid #d9d9d9; border-radius:4px;">
              {{scores[index][idx].right}}
            </view>
          </picker>
          <button size="mini" data-round="{{index}}" data-court="{{idx}}" data-side="right" bindtap="addScore" style="margin-left:4px; background:#e6f7ff; color:#0050b3; border:none;" wx:if="{{scores[index][idx].right >= 21}}">+</button>
        </view>
      </view>
    </view>
  </view>  
</view>

