# BadmintonApp 羽毛球比赛助手

BadmintonApp 是一个基于微信小程序的羽毛球比赛管理工具，支持球员报名、自动生成对阵表、比分录入和得分排名等功能，适用于羽毛球活动组织者和参赛者。

## 主要功能

- **🎯 智能主界面**：现代化渐变设计，状态卡片展示，智能功能引导，操作流程清晰直观。
- **⚙️ 比赛设置**：可视化参数配置，支持参赛人数（4-20人）、场地数量（1-5片）、轮次设置等。
- **📝 球员报名**：支持自定义球员人数，输入球员姓名和性别，便捷完成报名。
- **🎲 智能分组**：可设置比赛轮数、场地数，自动生成合理的对阵安排，支持真混双分组算法。
- **🏟️ 对阵表展示**：清晰展示每一轮每个场地的对阵组合，支持比分录入，性别标识显示。
- **📊 比分与排名**：实时统计每位球员的胜负场次和小分，自动生成得分排名。
- **💾 数据管理**：支持本地缓存球员名单、赛程和比分，一键重置功能。

## 新版本特性 (v2.1)

### 🎨 全新UI设计
- **渐变背景**：紫蓝色渐变主题，体现运动活力
- **毛玻璃效果**：现代化视觉层次，提升用户体验
- **智能状态卡片**：实时显示参赛人数、场地数量、轮次设置
- **进度可视化**：比赛进度条，完成情况一目了然

### 🧠 智能分组算法
- **真混双优先**：1男1女 vs 1男1女 的真正混双分组
- **性别平衡**：智能处理男女比例，避免不合理组合
- **搭档多样性**：严格限制搭档次数（最多2次），促进交流
- **公平性保障**：基于出场次数的公平分配算法

### 📈 详细日志系统
- **实时监控**：每轮记录球员出场次数，性别标识清晰
- **统计分析**：公平性评估，分组类型统计
- **过程透明**：完整的分组过程日志，便于调试优化

## 快速开始

1. 使用微信开发者工具导入本项目目录。
2. 在主界面点击"比赛设置"，配置参赛人数、场地数量等参数。
3. 点击"球员报名"，录入球员姓名和性别信息，完成报名后直接生成对阵表。
4. 在"比赛进行"页面录入比分，查看实时排名。

## 算法说明

- **智能分组算法**：见 [`utils/scheduler.js`](utils/scheduler.js)，支持三级优先级分组、性别平衡、搭档轮换。
- **分组规则文档**：见 [`utils/rule.md`](utils/rule.md)，详细说明算法约束和优先级策略。
- **分组优化日志**：算法运行时会输出详细的分组过程和类型统计，便于分析和调试。

## 分组类型优先级 (v2.1优化)

### 🏆 真混双 (最优先)
- **组合方式**：(男A + 女A) vs (男B + 女B)
- **特点**：真正的混合双打，符合传统羽毛球规则
- **适用条件**：至少有2男2女可用球员
- **算法策略**：优先尝试所有可能的男女搭配组合

### 🥈 同性别双打 (次优先)  
- **男双对战**：(男A + 男B) vs (男C + 男D)
- **女双对战**：(女A + 女B) vs (女C + 女D)
- **特点**：保持竞技水平一致性，避免性别优势影响
- **适用条件**：至少有4名同性别球员

### 🥉 男双vs女双 (次次优先)  
- **组合方式**：(男A + 男B) vs (女A + 女B)
- **特点**：保持性别数量平衡的替代方案
- **适用条件**：至少有2男2女，但无法组成真混双时使用
- **说明**：这种组合保证了性别平衡，但不是传统意义的混双

### 🆘 兜底方案 (最后选择)
- **特点**：忽略性别限制，仅考虑搭档次数和出场频率
- **适用条件**：当其他优先级都无法满足时使用
- **目的**：确保算法能够完成分组，避免无法生成对阵表

## 技术特性

- **智能状态管理**：根据数据状态动态显示功能按钮
- **渐进式引导**：按使用流程逐步解锁功能
- **错误预防**：操作前进行条件检查和友好提示
- **数据持久化**：全局数据管理 + 本地存储双重保障

## 适用场景

- 适合羽毛球俱乐部、兴趣小组、公司活动等场合的比赛组织与管理。
- 支持4-20人规模的比赛，1-5片场地的灵活配置。
- 特别适合需要性别平衡和公平分组的混合比赛。

---

## 版本历史

**v2.1** - 全新UI设计 + 真混双算法 + 智能分组优化  
**v2.0** - 搭档次数限制 + 性别分组规则  
**v1.0** - 基础分组功能
